
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>Études for Erlang - CH 5  | Connor Ross | Tech</title>

	<meta name="author" content="Connor Ross">

<meta name="description" content="Connor Ross' place to ramble about the interesting development tech he has used recently."> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Connor Ross | Tech" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Connor Ross | Tech</a></h1>
<span class="tagline">The Tech That Keeps Me Ticking</span>
<nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<header>
		<h2 class="title">Études for Erlang - CH 5</h2>
		<div class="meta date">








  


<time datetime="2013-07-15T23:36:00-04:00" pubdate data-updated="true">Jul 15<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content"><p>Have you missed me??  For the past two weeks I have been driving to and from many a wedding.  My cousin, Olivia, got married two weeks ago to an awesome man, John!  Then this past weekend my best friend growing up, Ben, got married to a lady who I do not know to well but any person he would marry must be a great gal!  To each of you I wish you the best!</p>

<p>I am going to stick to doing only do one chapter per blog post.  Hopefully you should see two more posts right after this one!  For those of you who have forgotten completely what I have been talking about for the past 6 weeks check out <a href="/2013/06/25/etudes-for-erlang-ch-4/">chapter 4</a>.</p>

<p>Let&rsquo;s hop right into the good stuff!</p>

<!--more-->


<h2>Chapter 5: Strings</h2>

<p><a href="http://chimera.labs.oreilly.com/books/1234000000726/ch05.html">link</a></p>

<p>During the meetup, everyone discussed the first etude in this chapter as really really annoying!  The task set before us is to go against the erlang mantra of &ldquo;let it fail&rdquo;, and create a command line front end to our area functions that does not fail but gives pretty error messages.  While I do agree this exercise sucks, it was still pretty interesting to try and do something that is really easy in another language only to find it super hard in erlang.</p>

<p>The exersise asks us to create our command line util in a module named ask_area, with a function called area.</p>

<figure class='code'><figcaption><span> (ask_area.erl)</span> <a href='/downloads/code/erlang-etudes/ch5/ask_area.erl'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ask_area</span><span class="p">).</span>
</span><span class='line'><span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">area</span><span class="o">/</span><span class="mi">0</span><span class="p">]).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">area</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="p">{</span><span class="nv">Input</span><span class="p">,</span> <span class="nv">Shape</span><span class="p">}</span> <span class="o">=</span> <span class="n">get_shape</span><span class="p">(),</span>
</span><span class='line'>  <span class="k">case</span> <span class="nv">Shape</span> <span class="k">of</span>
</span><span class='line'>    <span class="n">unknown</span> <span class="o">-&gt;</span> <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&quot;Unknown shape </span><span class="si">~c~n</span><span class="s">&quot;</span><span class="p">,[</span><span class="nv">Input</span><span class="p">]);</span>
</span><span class='line'>    <span class="p">_</span> <span class="o">-&gt;</span> <span class="n">get_area</span><span class="p">(</span><span class="nv">Shape</span><span class="p">,</span> <span class="n">get_dimensions</span><span class="p">(</span><span class="nv">Shape</span><span class="p">))</span>
</span><span class='line'>  <span class="k">end</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_area</span><span class="p">(_,</span> <span class="p">{</span><span class="n">error</span><span class="p">,</span> <span class="p">_})</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&quot;Error in first number.</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_area</span><span class="p">(_,</span> <span class="p">{_,</span> <span class="n">error</span><span class="p">})</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&quot;Error in second number.</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_area</span><span class="p">(_,</span> <span class="p">{</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">})</span> <span class="k">when</span> <span class="nv">X</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">Y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&quot;Both number must be greater than or equal to zero.</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_area</span><span class="p">(</span><span class="nv">Shape</span><span class="p">,</span> <span class="p">{</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">})</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">({</span><span class="nv">Shape</span><span class="p">,</span> <span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">}).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_shape</span><span class="p">()</span>  <span class="o">-&gt;</span>
</span><span class='line'>  <span class="p">[</span><span class="nv">Char</span><span class="p">|_]</span> <span class="o">=</span> <span class="nn">io</span><span class="p">:</span><span class="nf">get_line</span><span class="p">(</span><span class="s">&quot;R)ectangle, T)riangle, or E)llipse &gt; &quot;</span><span class="p">),</span>
</span><span class='line'>  <span class="n">char_to_shape</span><span class="p">(</span><span class="nv">Char</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_number</span><span class="p">(</span><span class="nv">Prompt</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">PromptString</span> <span class="o">=</span> <span class="s">&quot;Enter &quot;</span> <span class="o">++</span> <span class="nv">Prompt</span> <span class="o">++</span> <span class="s">&quot; &gt; &quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nv">Result</span> <span class="o">=</span> <span class="nn">io</span><span class="p">:</span><span class="nf">get_line</span><span class="p">(</span><span class="nv">PromptString</span><span class="p">),</span>
</span><span class='line'>  <span class="n">string_to_number</span><span class="p">(</span><span class="nv">Result</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">string_to_number</span><span class="p">(</span><span class="nv">String</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Number</span> <span class="o">=</span> <span class="nn">string</span><span class="p">:</span><span class="nf">to_float</span><span class="p">(</span><span class="nv">String</span><span class="p">),</span>
</span><span class='line'>  <span class="k">case</span> <span class="nv">Number</span> <span class="k">of</span>
</span><span class='line'>    <span class="p">{</span><span class="n">error</span><span class="p">,_}</span> <span class="o">-&gt;</span> <span class="nb">element</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nn">string</span><span class="p">:</span><span class="nf">to_integer</span><span class="p">(</span><span class="nv">String</span><span class="p">));</span>
</span><span class='line'>    <span class="p">_</span> <span class="o">-&gt;</span> <span class="nb">element</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nv">Number</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_dimensions</span><span class="p">(</span><span class="n">triangle</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Dimension1</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="s">&quot;width&quot;</span><span class="p">),</span>
</span><span class='line'>  <span class="nv">Dimension2</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="s">&quot;height&quot;</span><span class="p">),</span>
</span><span class='line'>  <span class="p">{</span><span class="nv">Dimension1</span><span class="p">,</span> <span class="nv">Dimension2</span><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_dimensions</span><span class="p">(</span><span class="n">rectangle</span><span class="p">)</span><span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Dimension1</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="s">&quot;base&quot;</span><span class="p">),</span>
</span><span class='line'>  <span class="nv">Dimension2</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="s">&quot;height&quot;</span><span class="p">),</span>
</span><span class='line'>  <span class="p">{</span><span class="nv">Dimension1</span><span class="p">,</span> <span class="nv">Dimension2</span><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nf">get_dimensions</span><span class="p">(</span><span class="n">ellipse</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Dimension1</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="s">&quot;axis&quot;</span><span class="p">),</span>
</span><span class='line'>  <span class="nv">Dimension2</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="s">&quot;axis&quot;</span><span class="p">),</span>
</span><span class='line'>  <span class="p">{</span><span class="nv">Dimension1</span><span class="p">,</span> <span class="nv">Dimension2</span><span class="p">}.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">char_to_shape</span><span class="p">(</span><span class="nv">Char</span><span class="p">)</span>  <span class="o">-&gt;</span>
</span><span class='line'>  <span class="k">case</span> <span class="nv">Char</span> <span class="k">of</span>
</span><span class='line'>    <span class="sc">$T</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">t</span><span class="p">,</span> <span class="n">triangle</span><span class="p">};</span>
</span><span class='line'>    <span class="sc">$t</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">t</span><span class="p">,</span> <span class="n">triangle</span><span class="p">};</span>
</span><span class='line'>    <span class="sc">$R</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">r</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">};</span>
</span><span class='line'>    <span class="sc">$r</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">r</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">};</span>
</span><span class='line'>    <span class="sc">$E</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">e</span><span class="p">,</span> <span class="n">ellipse</span><span class="p">};</span>
</span><span class='line'>    <span class="sc">$e</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">e</span><span class="p">,</span> <span class="n">ellipse</span><span class="p">};</span>
</span><span class='line'>    <span class="p">_</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="nv">Char</span><span class="p">,</span> <span class="n">unknown</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Alright if any of you worked through that with me, how long did it take you to get the right pretty error messages???  That was intense, even my stand by to just output what the code is returning to me does not work well in erlang.  I have to guess correctly as to what kind of type the thing I am trying to <code>io:format(&ldquo;~X~Y~Z…&rdquo;)</code>, else the whole thing blows up with an invalid arguments exception.</p>

<p>After that exercise I think even the author was done but his editor told him he needed two exercises in this etude.  I think that because the second exercise is kinda a joke compared to the first.  All that is needed is to take  ISO date formated string &ldquo;yyyy-mm-dd&rdquo; and return [yyyy,mm,dd] with ZERO error handling. Easy enough right.</p>

<figure class='code'><figcaption><span> (dates.erl)</span> <a href='/downloads/code/erlang-etudes/ch5/dates.erl'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">dates</span><span class="p">).</span>
</span><span class='line'><span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">date_parts</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">date_parts</span><span class="p">(</span><span class="nv">Date</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="p">[</span><span class="nv">Year</span><span class="p">,</span> <span class="nv">Month</span><span class="p">,</span> <span class="nv">Day</span><span class="p">]</span> <span class="o">=</span> <span class="nn">re</span><span class="p">:</span><span class="nf">split</span><span class="p">(</span><span class="nv">Date</span><span class="p">,</span> <span class="s">&quot;-&quot;</span><span class="p">,</span> <span class="p">[{</span><span class="n">return</span><span class="p">,</span> <span class="n">list</span><span class="p">}]),</span>
</span><span class='line'>  <span class="p">[</span><span class="nb">element</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nn">string</span><span class="p">:</span><span class="nf">to_integer</span><span class="p">(</span><span class="nv">Year</span><span class="p">)),</span>
</span><span class='line'>   <span class="nb">element</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nn">string</span><span class="p">:</span><span class="nf">to_integer</span><span class="p">(</span><span class="nv">Month</span><span class="p">)),</span>
</span><span class='line'>   <span class="nb">element</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nn">string</span><span class="p">:</span><span class="nf">to_integer</span><span class="p">(</span><span class="nv">Day</span><span class="p">))].</span>
</span></code></pre></td></tr></table></div></figure>


<p>Thats it. If anyone asks me to write a command line utility again in erlang, I am going to tell them that I will buy them lunch if I can write it in another language like ruby or c#.</p>

<p>Let me know if you ran into any other interesting issues while working on this weeks etudes!</p>
</div>
	
		<div class="meta">
			<span class="comments"><a href="/2013/07/15/etudes-for-erlang-ch-5/#disqus_thread">Comments</a></span>
		</div>
	

</article>

	
	<div class="share">
		<ul>
			<li>
  <a href="https://twitter.com/intent/tweet?text=Études for Erlang - CH 5 by @otter311&url=http://connor311.github.io/2013/07/15/etudes-for-erlang-ch-5/" title="Share Études for Erlang - CH 5 on Twitter">
    <img src="/images/social/twitter.png" />
  </a>
</li>

			<li>
  <a href="https://www.facebook.com/sharer.php?u=http://connor311.github.io/2013/07/15/etudes-for-erlang-ch-5/" title="Share Études for Erlang - CH 5 on Facebook">
    <img src="/images/social/facebook.png" />
  </a>
</li>

			<li>
  <a href="https://plus.google.com/share?url=http://connor311.github.io/2013/07/15/etudes-for-erlang-ch-5/" title="Share Études for Erlang - CH 5 on Google Plus">
    <img src="/images/social/google.png" />
  </a>
</li>

		</ul>
	</div>




<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">&copy; 2013

    Connor Ross

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/hyphenator.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'connorrosstech';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://connor311.github.io/2013/07/15/etudes-for-erlang-ch-5/';
        var disqus_url = 'http://connor311.github.io/2013/07/15/etudes-for-erlang-ch-5/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-42145286-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
</html>
