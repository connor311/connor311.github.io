
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>Études for Erlang - CH 3  | Connor Ross | Tech</title>

	<meta name="author" content="Connor Ross">

<meta name="description" content="It is that time again, well I don&rsquo;t really know if I can say that yet since this is only the second installment of the series.  Last week I &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Connor Ross | Tech" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Connor Ross | Tech</a></h1>
<span class="tagline">The Tech That Keeps Me Ticking</span>
<nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<header>
		<h2 class="title">Études for Erlang - CH 3</h2>
		<div class="meta date">








  


<time datetime="2013-06-16T23:01:00-04:00" pubdate data-updated="true">Jun 16<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content"><p>It is that time again, well I don&rsquo;t really know if I can say that yet since this is only the second installment of the series.  Last week I wrote about <a href="/2013/06/14/etudes-for-erlang-ch-1-and-2/">chapters 1 &amp; 2</a> from <a href="http://chimera.labs.oreilly.com/books/1234000000726" target="_blank">Etudes for Erlang</a>, however I actually wrote my solutions after the <a href="http://www.meetup.com/Erlang-NYC/events/122174852/" target="_blank">meetup</a>.  This time I am getting a head start and thankfully I only have to do one chapter. I will just hop right into it, because I am excited to learn some more about Erlang!<!--more--></p>

<h2>Chapter 3: Atoms, Tuples, and Pattern Matching</h2>


<p><a href="http://chimera.labs.oreilly.com/books/1234000000726/ch03.html" target="_blank">link</a></p>

<p>The first part is asking me to update my area function, from last week, to also calculate the area of a triangle, and ellipse not just a rectangle.  The main change it would seem is using pattern matching on a new parameter that is an atom representing the shape.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span><span class="p">;</span>
</span><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">triangle</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">ellipse</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">math</span><span class="p">:</span><span class="nf">pi</span><span class="p">()</span> <span class="o">*</span> <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Output:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">3</span><span class="o">&gt;</span> <span class="n">c</span><span class="p">(</span><span class="n">geom</span><span class="p">).</span>
</span><span class='line'><span class="p">{</span><span class="n">ok</span><span class="p">,</span><span class="n">geom</span><span class="p">}</span>
</span><span class='line'><span class="mi">4</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">).</span>
</span><span class='line'><span class="mi">12</span>
</span><span class='line'><span class="mi">5</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">triangle</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">).</span>
</span><span class='line'><span class="mi">7</span><span class="p">.</span><span class="mi">5</span>
</span><span class='line'><span class="mi">6</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">ellipse</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">).</span>
</span><span class='line'><span class="mi">25</span><span class="p">.</span><span class="mi">132741228718345</span>
</span></code></pre></td></tr></table></div></figure>


<p>The second part brings up the fact that our current solution will allow a negative input, while you cannot have a negative area. The recommendation is to use guards. A guard is a when statement after the function signature but before the &ndash;&gt;. If you have more then one they can be seporated with commas.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="k">when</span> <span class="nv">Height</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">Width</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span><span class="p">;</span>
</span><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">triangle</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="k">when</span> <span class="nv">Height</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">Width</span> <span class="o">&gt;=</span> <span class="mi">0</span>  <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">ellipse</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="k">when</span> <span class="nv">Height</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">Width</span> <span class="o">&gt;=</span> <span class="mi">0</span>  <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">math</span><span class="p">:</span><span class="nf">pi</span><span class="p">()</span> <span class="o">*</span> <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Output:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">11</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">).</span>
</span><span class='line'><span class="mi">12</span>
</span><span class='line'><span class="mi">12</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">ellipse</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">).</span>
</span><span class='line'><span class="mi">18</span><span class="p">.</span><span class="mi">84955592153876</span>
</span><span class='line'><span class="mi">13</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">,</span><span class="mi">3</span><span class="p">).</span>
</span><span class='line'><span class="o">**</span> <span class="n">exception</span> <span class="nn">error</span><span class="p">:</span> <span class="n">no</span> <span class="n">function</span> <span class="n">clause</span> <span class="n">matching</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">geom</span><span class="p">.</span><span class="n">erl</span><span class="p">,</span> <span class="n">line</span> <span class="mi">14</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Onto part three, where our function is now supposed to take in any kind of shape. One catch is that if the function does not support the shape it just returns zero. Seems a little none Erlang (let it fail), but I guess it is a good way to teach underscores. Oh crap, I just gave away the answer&hellip; In Erlang an _ in a signature means accept anything.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">...</span>
</span><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">ellipse</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="k">when</span> <span class="nv">Height</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">Width</span> <span class="o">&gt;=</span> <span class="mi">0</span>  <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">math</span><span class="p">:</span><span class="nf">pi</span><span class="p">()</span> <span class="o">*</span> <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span><span class="p">;</span>
</span><span class='line'><span class="nf">area</span><span class="p">(_,</span> <span class="p">_,</span> <span class="p">_)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="mi">0</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Output:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">18</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">).</span>
</span><span class='line'><span class="mi">12</span>
</span><span class='line'><span class="mi">19</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">pentagon</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">).</span>
</span><span class='line'><span class="mi">0</span>
</span><span class='line'><span class="mi">20</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">hexagon</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">).</span>
</span><span class='line'><span class="mi">0</span>
</span><span class='line'><span class="mi">21</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">).</span>
</span><span class='line'><span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see, now our negatives return zero even for recognized shapes. This is because the guards are making the pattern match fail, those allowing the catch all case to match and return zero.</p>

<p>The fourth and last part brings Erlang Tuples into the picture. The new requirement is to only have one public facing function, area/1. How are we going to take a 3 parameter function down to only one you ask? By using tuples, which in my mind are the strongly typed messages used in Erlang. While Erlang compiler does not throw error messages like a normal strongly typed languages, the use of tuples, atoms, and pattern matching allow a programmer to specify exactly what he/she wants to come into the function. In this example we will continue to use the shape name as the object type, by making it the first object in the tuple followed by its specs. {shape,number,number}</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">geom</span><span class="p">).</span>
</span><span class='line'><span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">area</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">area</span><span class="p">({</span><span class="nv">Shape</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">})</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="n">area</span><span class="p">(</span><span class="nv">Shape</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="k">when</span> <span class="nv">Height</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">Width</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span><span class="p">;</span>
</span><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">triangle</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="k">when</span> <span class="nv">Height</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">Width</span> <span class="o">&gt;=</span> <span class="mi">0</span>  <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="nf">area</span><span class="p">(</span><span class="n">ellipse</span><span class="p">,</span> <span class="nv">Height</span><span class="p">,</span> <span class="nv">Width</span><span class="p">)</span> <span class="k">when</span> <span class="nv">Height</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">Width</span> <span class="o">&gt;=</span> <span class="mi">0</span>  <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">math</span><span class="p">:</span><span class="nf">pi</span><span class="p">()</span> <span class="o">*</span> <span class="nv">Height</span> <span class="o">*</span> <span class="nv">Width</span><span class="p">;</span>
</span><span class='line'><span class="nf">area</span><span class="p">(_,</span> <span class="p">_,</span> <span class="p">_)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="mi">0</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Output:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">26</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">({</span><span class="n">rectangle</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">}).</span>
</span><span class='line'><span class="mi">21</span>
</span><span class='line'><span class="mi">27</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">({</span><span class="n">triangle</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">}).</span>
</span><span class='line'><span class="mi">10</span><span class="p">.</span><span class="mi">5</span>
</span><span class='line'><span class="mi">28</span><span class="o">&gt;</span> <span class="nn">geom</span><span class="p">:</span><span class="nf">area</span><span class="p">({</span><span class="n">ellipse</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">}).</span>
</span><span class='line'><span class="mi">65</span><span class="p">.</span><span class="mi">97344572538566</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hope to see you at Erlang-NYC meetup this tuesday (06/18/2013)! Look for next weeks solution to chapters 4 &amp; 5, next sunday .</p>
</div>
	
		<div class="meta">
			<span class="comments"><a href="/blog/2013/06/16/etudes-for-erlang-ch-3/#disqus_thread">Comments</a></span>
		</div>
	

</article>

	
	<div class="share">
		<ul>
			<li>
  <a href="https://twitter.com/intent/tweet?text=Études for Erlang - CH 3 by @otter311&url=http://connor311.github.io/blog/2013/06/16/etudes-for-erlang-ch-3/" title="Share Études for Erlang - CH 3 on Twitter">
    <img src="/images/social/twitter.png" />
  </a>
</li>

			<li>
  <a href="https://www.facebook.com/sharer.php?u=http://connor311.github.io/blog/2013/06/16/etudes-for-erlang-ch-3/" title="Share Études for Erlang - CH 3 on Facebook">
    <img src="/images/social/facebook.png" />
  </a>
</li>

			<li>
  <a href="https://plus.google.com/share?url=http://connor311.github.io/blog/2013/06/16/etudes-for-erlang-ch-3/" title="Share Études for Erlang - CH 3 on Google Plus">
    <img src="/images/social/google.png" />
  </a>
</li>

		</ul>
	</div>




<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">&copy; 2013

    Connor Ross

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/hyphenator.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'connorrosstech';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://connor311.github.io/blog/2013/06/16/etudes-for-erlang-ch-3/';
        var disqus_url = 'http://connor311.github.io/blog/2013/06/16/etudes-for-erlang-ch-3/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-42145286-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
</html>
